---
import Layout from "../layouts/Layout.astro";
import RegisterForm from "../components/auth/RegisterForm";
import { Toaster } from "sonner";

export const prerender = false;

// Server-side session check - redirect authenticated users to dashboard
const {
  data: { session },
} = await Astro.locals.supabase.auth.getSession();
if (session) {
  return Astro.redirect("/dashboard/created");
}
---

<Layout title="Register - JulklApp">
  <div class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4">
    <div class="w-full max-w-md">
      {/* Card Container */}
      <div class="bg-white rounded-lg shadow-lg p-8 space-y-6">
        {/* Header */}
        <div class="text-center space-y-2">
          <h1 class="text-3xl font-bold text-gray-900">JulklApp</h1>
          <p class="text-sm text-gray-600">Create your account</p>
        </div>

        {/* Registration Form */}
        <RegisterForm client:load />
      </div>
    </div>
  </div>

  {/* Toast notifications */}
  <Toaster client:load position="top-center" />
</Layout>
