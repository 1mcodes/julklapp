---
import Layout from "../layouts/Layout.astro";
import ResetPasswordForm from "../components/auth/ResetPasswordForm";
import { Toaster } from "sonner";

export const prerender = false;

// TODO: Add token validation when auth is implemented
// Extract token from URL hash (client-side only)
// For now, we'll pass a placeholder token
const token = "";
---

<Layout title="Reset Password - JulklApp">
  <div class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4">
    <div class="w-full max-w-md">
      {/* Card Container */}
      <div class="bg-white rounded-lg shadow-lg p-8 space-y-6">
        {/* Header */}
        <div class="text-center space-y-2">
          <h1 class="text-3xl font-bold text-gray-900">JulklApp</h1>
          <p class="text-sm text-gray-600">Set your new password</p>
        </div>

        {/* Reset Password Form */}
        <ResetPasswordForm client:load token={token} />
      </div>
    </div>
  </div>

  {/* Toast notifications */}
  <Toaster client:load position="top-center" />

  {/* Client-side script to extract token from URL hash */}
  <script>
    // Extract token from URL hash (#access_token=...)
    // This will be replaced with actual implementation when auth is ready
    const hash = window.location.hash.substring(1);
    const params = new URLSearchParams(hash);
    const token = params.get('access_token') || '';
    
    // TODO: Pass token to form component when auth is implemented
    // For now, this is just a placeholder
  </script>
</Layout>

